import{_ as J,x as Q,y as $,z as ee,L as oe,a as ne,A as te,I as ae,B as le,C as se,D as ie,h as re,E as i,u as ue,G as R,H as ce,J as de,r,o as m,b as L,w as l,d as T,v as a,K as A,e as H,F as Y,f as _,M as Z,N as q,O as n,t as b}from"./index-Bb_j5q5X.js";const me={components:{"base-menu-app":Q,"sol-de":$,"empty-modal":ee,"loa-der":oe,IonItem:ne,IonInput:te,IonList:ae,IonButton:le,IonSelect:se,IonSelectOption:ie,IonLabel:re},setup(){const E=i(!1),p="//127.0.0.1:8002";async function P(){const o=new FormData;o.append("currency",f.value),o.append("capital",I.value),o.append("taux",w),o.append("duree",B);try{const s=await fetch("".concat(p,"/jov/api/invest/receiveInvests/"),{method:"POST",headers:{Authorization:"Bearer "+c.getters.getAccessToken},body:o});s.ok?(console.log("La reponse est bien: ",s),E.value=!0):(console.log("La reponse n'est pas bon"),E.value=!1)}catch(s){console.log("VOus avez rencontre une erreur supprenant : ",s),E.value=!1}}const e=i(!1),g=i(!1),D=i(!1),F=()=>{if(D.value)return D.value=!1,0;e.value?(e.value=!1,g.value=!g.value):(e.value=!0,console.log("START SENDING ..."),P(),console.log("END SENDING"),setTimeout(()=>{g.value=!g.value},5e3))},c=ue();i(null);const d=i(null),S=[1,2,3,4,5,6,7,8,9,10,11];var u=[];const V=[{id:1,name:"US Dollar",country:"International",abbreviation:"USD"},{id:2,name:"Fbu",country:"Bi",abbreviation:"BIF"},{id:3,name:"Frw",country:"Rw",abbreviation:"RWF"},{id:4,name:"ShillingKenya",country:"Ke",abbreviation:"KES"},{id:5,name:"Ugshilling",country:"Ug",abbreviation:"UGX"},{id:6,name:"ShillingTanzania",country:"Tz",abbreviation:"Tsh"},{id:7,name:"Kwacha",country:"Zm",abbreviation:"ZMW"},{id:8,name:"Euro",country:"International",abbreviation:"EUR"},{id:9,name:"USDT",country:"Crypto",abbreviation:"USDT"},{id:10,name:"TRX",country:"Crypto",abbreviation:"USD"},{id:11,name:"Lit Dinar",country:"Principale",abbreviation:"LID"}],h=i([]);let f=i("");function k(){var o=c.state.top5.concat(S);let s=new Set(o);u=Array.from(s),console.log("INVEST CHUNK: the wanted BEFORE action: ",u);let N=[];u.forEach(v=>{v!==0&&N.push(v)}),u=N,console.log("INVEST CHUNK: the wanted AFTER action: ",u)}function U(){var o=[];const s=u.length;for(let N=0;N<s;N++)V.forEach(v=>{if(u[N]==v.id){let X={id:v.id,name:v.name,country:v.country,abbreviation:v.abbreviation};o.push(X)}});h.value=o,console.log("INVESTED CONSTRUCT: finished has : ",h.value)}function x(){c.commit("addTop5",{value:d.value})}function z(){localStorage.setItem("top5",c.getters.getTop5)}function t(){console.log("store Before upload :",c.getters.getTop5);const o=localStorage.getItem("top5");c.dispatch("uploadTop5",o),console.log("store After upload :",c.getters.getTop5)}function j(){k(),U()}function W(){console.log("INVEST SETUP: START Initialization"),t(),j(),console.log("INVEST SETUP: END Initialization")}W(),R(d,o=>{h?(f.value=V[o-1].abbreviation,console.log("Finished is available : ",f.value),console.log("Sel : ",d.value," Val: ",o)):console.log("Finished is not available")}),ce(()=>{console.log("INVEST onBeforeUpdate: Start"),x(),j(),console.log("Here, the currency is : ",f.value),console.log("INVEST onBeforeUpdate: End")}),de(()=>{console.log("INVEST: You are about to leave me, ONBEFOREUNMOUNT"),console.log("INVEST: Now downloading, ONBEFOREUNMOUNT"),d.value?(x(),z(),console.log("INVEST ONBEFOREUNMOUNT: have downloaded: ",d.value)):console.log("INVEST: didn't download, ONBEFOREUNMOUNT"),console.log("INVEST: END downloading, ONBEFOREUNMOUNT")});var w=0,B=0,O=0,K=i(0);const I=i(null),y=i(null),C=i(""),M=[{id:1,duree:"1 mois",number:1,taux:.2},{id:2,duree:"3 mois",number:3,taux:.7},{id:3,duree:"6 mois",number:6,taux:1.7},{id:4,duree:"1 ans",number:12,taux:3.8},{id:5,duree:"2 ans",number:24,taux:8},{id:6,duree:"3 ans",number:36,taux:12.5},{id:7,duree:"5 ans",number:60,taux:22}];function G(o){if(y.value){let s=y.value;C.value=M[s-1].duree,w=M[s-1].taux,console.log("You chose rate: ",w),B=M[s-1].number,console.log("You chose duree: ",B),O=w/100*I.value*(B/12),console.log("Votre Interet est: ",O),K.value=Number(I.value)+Number(O)}}return R(y,o=>{G(y.value),console.log("Vous voulez une periode de : ",C.value)}),R(I,o=>{G(y.value)}),{selectedPlan:y,plans:M,capital:I,result:K,interest:O,periode:C,finished:h,selectedItem:d,currency:f,store:c,modalActive:g,waiter:e,respoOperation:E,toogleModal:F}}},pe={key:0,class:"avatar-container"},ve=n("span",{style:{"margin-right":"1rem"}}," ",-1),fe=n("br",null,null,-1),be={key:1,class:"loader",style:{"background-color":"transparent",position:"fixed",top:"60%",left:"50%",transform:"translate(-50%, -50%)","z-index":"5"}},_e={key:2,class:"home"},ge=n("div",{class:"modal-contente"},[n("h1",null,"Confirmation "),n("p",null,[_("Merci pour votre dépôt. Nous traitons votre demande et vous informerons dès qu'elle sera approuvée. "),n("br"),_(" Veuillez vérifier votre boîte de notifications pour les mises à jour. "),n("br"),n("span",{style:{"font-size":"2.3vh",display:"inline-flex",position:"relative","margin-top":"3vh"}}," Ceci pourra prendre au maximum 10 minutes.")])],-1),he={key:3,class:"home"},ye=n("div",null,[n("h1",{class:"modal-content modal-content-erreur"},"Une erreur est survenue "),n("p",null,[_("Nous n'avons pas pu finaliser votre opération suite à un problème de connexion au serveur. "),n("br"),n("span",{style:{"font-size":"2.3vh",display:"inline-flex",position:"relative","margin-top":"3vh"}}," Veuillez réessayer ultérieurement.")])],-1),Ne=n("br",null,null,-1),Te=n("br",null,null,-1),Ee=n("br",null,null,-1);function Ie(E,p,P,e,g,D){const F=r("ava-tar"),c=r("sol-de"),d=r("ion-select-option"),S=r("ion-select"),u=r("ion-item"),V=r("ion-label"),h=r("ion-input"),f=r("ion-list"),k=r("loa-der"),U=r("empty-modal"),x=r("ion-button"),z=r("base-menu-app");return m(),L(z,{pageTitle:"Investissements",baArrow:"true"},{default:l(()=>[e.store.getters.getLastActivity!==null?(m(),T("div",pe,[a(F)])):A("",!0),a(c),a(f,null,{default:l(()=>[a(u,null,{default:l(()=>[a(S,{"label-placement":"floating",justify:"space-between",label:"Investir avec",placeholder:"votre methode de paiement",modelValue:e.selectedItem,"onUpdate:modelValue":p[0]||(p[0]=t=>e.selectedItem=t)},{default:l(()=>[(m(!0),T(Y,null,H(e.finished,t=>(m(),L(d,{class:"jov",value:t.id},{default:l(()=>[_(b(t.name)+" ("+b(t.country)+") ",1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),a(u,null,{default:l(()=>[a(V,null,{default:l(()=>[_("Montant")]),_:1}),ve,a(h,{color:"primary",placeholder:"ou la taille de votre investissement","aria-label":"du destinataire",type:"number",modelValue:e.capital,"onUpdate:modelValue":p[1]||(p[1]=t=>e.capital=t)},null,8,["modelValue"])]),_:1}),a(u,null,{default:l(()=>[a(S,{"label-placement":"floating",justify:"space-between",label:"Choisissez votre plan d'investissement",placeholder:"votre methode de paiement",modelValue:e.selectedPlan,"onUpdate:modelValue":p[2]||(p[2]=t=>e.selectedPlan=t)},{default:l(()=>[(m(!0),T(Y,null,H(e.plans,t=>(m(),L(d,{class:"jov",value:t.id},{default:l(()=>[_(b(t.duree)+" ("+b(t.taux)+"%) ",1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1}),Z(n("span",{style:{display:"inline-flex",position:"relative","margin-top":"10px","font-size":"1.12em"},class:"whiteOnly centered"}," Vous aurez "+b(e.result)+" ("+b(e.currency)+") après une période de "+b(e.periode)+".",513),[[q,e.selectedPlan&&e.capital]]),fe,e.waiter?(m(),T("div",be,[a(k)])):A("",!0),e.respoOperation?(m(),T("div",_e,[a(U,{onByeModal:e.toogleModal,modalActive:e.modalActive,erreur:"false"},{default:l(()=>[ge]),_:1},8,["onByeModal","modalActive"])])):A("",!0),e.respoOperation?A("",!0):(m(),T("div",he,[a(U,{onByeModal:e.toogleModal,modalActive:e.modalActive,erreur:"true"},{default:l(()=>[ye]),_:1},8,["onByeModal","modalActive"])])),Ne,Te,Ee,Z(a(x,{id:"confirmButton",expand:"block",onClick:e.toogleModal},{default:l(()=>[_("Confirmer")]),_:1},8,["onClick"]),[[q,!e.modalActive&&e.selectedItem]])]),_:1})}const Ve=J(me,[["render",Ie]]);export{Ve as default};
